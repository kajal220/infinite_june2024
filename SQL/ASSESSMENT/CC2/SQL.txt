
--1. creating a database
create database Employeemanagement

use Employeemanagement

--2 creating table Employee_Details
  create table Employee_Details(
  Empno int primary key,
  Empname varchar(50)  not null,
  Empsal numeric(10,2) check (Empsal >= 25000),
  Emptype char(1) check (Emptype in('F', 'P')));

  select * from Employee_Details

  --1.Create a stored procedure that adds new rows to the Employee_Details Table.
  --The procedure should accept all the details as input except empno.
  --You need to write the code in the procedure to generate the empno and then insert
    
	Create or alter proc  Empdetails (@emp_name Varchar(50), @emp_sal Numeric(10,2), @emp_type char(1))
as
Begin
  Declare @gen_emp_no int

  Select @gen_emp_no = case
                       when max(Emp_no) is null then 0
                       else
                       max(Emp_no)
                       end  
  From Employee_Details
  set @gen_emp_no = @gen_emp_no + 1

  Insert into Employee_Details Values (@gen_emp_no, @emp_name, @emp_sal, @emp_type)
  print new employee @Empname with employee number + Cast (@Empno as varchar(10)) + 'has been added with salary
  +cast(@Empsal as varchar(10)) and type @Emptype
End

	--2. Check the procedure
	exec Empdetails 'Kajal', 40000, 'F'
	exec Empdetails 'Anchal', 60000, 'P'
